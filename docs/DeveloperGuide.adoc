= Event Organiser - Developer Guide
:site-section: DeveloperGuide
:toc:
:toc-title:
:toc-placement: preamble
:toclevels: 4
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:warning-caption: :warning:
:experimental:
endif::[]
:repoURL: https://github.com/CS2103-AY1819S1-W10-3/main/tree/master

By: `Team W10-03`      Since: `Aug 2018`      Licence: `MIT`

== Setting up

=== Prerequisites

. *JDK `9`* or later
+
[WARNING]
JDK `10` on Windows will fail to run tests in <<UsingGradle#Running-Tests, headless mode>> due to a https://github.com/javafxports/openjdk-jfx/issues/66[JavaFX bug].
Windows developers are highly recommended to use JDK `9`.

. *IntelliJ* IDE
+
[NOTE]
IntelliJ by default has Gradle and JavaFx plugins installed. +
Do not disable them. If you have disabled them, go to `File` > `Settings` > `Plugins` to re-enable them.


=== Setting up the project in your computer

. Fork this repo, and clone the fork to your computer
. Open IntelliJ (if you are not in the welcome screen, click `File` > `Close Project` to close the existing project dialog first)
. Set up the correct JDK version for Gradle
.. Click `Configure` > `Project Defaults` > `Project Structure`
.. Click `New...` and find the directory of the JDK
. Click `Import Project`
. Locate the `build.gradle` file and select it. Click `OK`
. Click `Open as Project`
. Click `OK` to accept the default settings
. Open a console and run the command `gradlew processResources` (Mac/Linux: `./gradlew processResources`). It should finish with the `BUILD SUCCESSFUL` message. +
This will generate all resources required by the application and tests.
. Open link:{repoURL}/src/main/java/seedu/address/storage/XmlAdaptedPerson.java[`XmlAdaptedPerson.java`] and link:{repoURL}/src/main/java/seedu/address/ui/MainWindow.java[`MainWindow.java`] and check for any code errors
.. Due to an ongoing https://youtrack.jetbrains.com/issue/IDEA-189060[issue] with some of the newer versions of IntelliJ, code errors may be detected even if the project can be built and run successfully
.. To resolve this, place your cursor over any of the code section highlighted in red. Press kbd:[ALT + ENTER], and select `Add '--add-modules=...' to module compiler options` for each error
. Repeat this for the test folder as well (e.g. check link:{repoURL}/src/test/java/seedu/address/commons/util/XmlUtilTest.java[`XmlUtilTest.java`] and link:{repoURL}/src/test/java/seedu/address/ui/HelpWindowTest.java[`HelpWindowTest.java`] for code errors, and if so, resolve it the same way)

=== Verifying the setup

. Run the `seedu.address.MainApp` and try a few commands
. <<Testing,Run the tests>> to ensure they all pass.

=== Configurations to do before writing code

==== Configuring the coding style

This project follows https://github.com/oss-generic/process/blob/master/docs/CodingStandards.adoc[oss-generic coding standards]. IntelliJ's default style is mostly compliant with ours but it uses a different import order from ours. To rectify,

. Go to `File` > `Settings...` (Windows/Linux), or `IntelliJ IDEA` > `Preferences...` (macOS)
. Select `Editor` > `Code Style` > `Java`
. Click on the `Imports` tab to set the order

* For `Class count to use import with '\*'` and `Names count to use static import with '*'`: Set to `999` to prevent IntelliJ from contracting the import statements
* For `Import Layout`: The order is `import static all other imports`, `import java.\*`, `import javax.*`, `import org.\*`, `import com.*`, `import all other imports`. Add a `<blank line>` between each `import`

Optionally, you can follow the <<UsingCheckstyle#, UsingCheckstyle.adoc>> document to configure Intellij to check style-compliance as you write code.

==== Updating documentation to match your fork

After forking the repo, the documentation will still have the SE-EDU branding and refer to the `se-edu/addressbook-level4` repo.

If you plan to develop this fork as a separate product (i.e. instead of contributing to `se-edu/addressbook-level4`), you should do the following:

. Configure the <<Docs-SiteWideDocSettings, site-wide documentation settings>> in link:{repoURL}/build.gradle[`build.gradle`], such as the `site-name`, to suit your own project.

. Replace the URL in the attribute `repoURL` in link:{repoURL}/docs/DeveloperGuide.adoc[`DeveloperGuide.adoc`] and link:{repoURL}/docs/UserGuide.adoc[`UserGuide.adoc`] with the URL of your fork.

==== Setting up CI

Set up Travis to perform Continuous Integration (CI) for your fork. See <<UsingTravis#, UsingTravis.adoc>> to learn how to set it up.

After setting up Travis, you can optionally set up coverage reporting for your team fork (see <<UsingCoveralls#, UsingCoveralls.adoc>>).

[NOTE]
Coverage reporting could be useful for a team repository that hosts the final version but it is not that useful for your personal fork.

Optionally, you can set up AppVeyor as a second CI (see <<UsingAppVeyor#, UsingAppVeyor.adoc>>).

[NOTE]
Having both Travis and AppVeyor ensures your App works on both Unix-based platforms and Windows-based platforms (Travis is Unix-based and AppVeyor is Windows-based)

==== Getting started with coding

When you are ready to start coding,

1. Get some sense of the overall design by reading <<Design-Architecture>>.
2. Take a look at <<GetStartedProgramming>>.

== Design

[[Design-Architecture]]
=== Architecture

.Architecture Diagram
image::Architecture.png[width="600"]

The *_Architecture Diagram_* given above explains the high-level design of the App. Given below is a quick overview of each component.

[TIP]
The `.pptx` files used to create diagrams in this document can be found in the link:{repoURL}/docs/diagrams/[diagrams] folder. To update a diagram, modify the diagram in the pptx file, select the objects of the diagram, and choose `Save as picture`.

`Main` has only one class called link:{repoURL}/src/main/java/seedu/address/MainApp.java[`MainApp`]. It is responsible for,

* At app launch: Initializes the components in the correct sequence, and connects them up with each other.
* At shut down: Shuts down the components and invokes cleanup method where necessary.

<<Design-Commons,*`Commons`*>> represents a collection of classes used by multiple other components. Two of those classes play important roles at the architecture level.

* `EventsCenter` : This class (written using https://github.com/google/guava/wiki/EventBusExplained[Google's Event Bus library]) is used by components to communicate with other components using events (i.e. a form of _Event Driven_ design)
* `LogsCenter` : Used by many classes to write log messages to the App's log file.

The rest of the App consists of four components.

* <<Design-Ui,*`UI`*>>: The UI of the App.
* <<Design-Logic,*`Logic`*>>: The command executor.
* <<Design-Model,*`Model`*>>: Holds the data of the App in-memory.
* <<Design-Storage,*`Storage`*>>: Reads data from, and writes data to, the hard disk.

Each of the four components

* Defines its _API_ in an `interface` with the same name as the Component.
* Exposes its functionality using a `{Component Name}Manager` class.

For example, the `Logic` component (see the class diagram given below) defines it's API in the `Logic.java` interface and exposes its functionality using the `LogicManager.java` class.

.Class Diagram of the Logic Component
image::LogicClassDiagram.png[width="800"]

[discrete]
==== Events-Driven nature of the design

The _Sequence Diagram_ below shows how the components interact for the scenario where the user issues the command `delete 1`.

.Component interactions for `delete 1` command (part 1)
image::SDforDeletePerson.png[width="800"]

[NOTE]
Note how the `Model` simply raises a `AddressBookChangedEvent` when the Address Book data are changed, instead of asking the `Storage` to save the updates to the hard disk.

The diagram below shows how the `EventsCenter` reacts to that event, which eventually results in the updates being saved to the hard disk and the status bar of the UI being updated to reflect the 'Last Updated' time.

.Component interactions for `delete 1` command (part 2)
image::SDforDeletePersonEventHandling.png[width="800"]

[NOTE]
Note how the event is propagated through the `EventsCenter` to the `Storage` and `UI` without `Model` having to be coupled to either of them. This is an example of how this Event Driven approach helps us reduce direct coupling between components.

The sections below give more details of each component.

[[Design-Ui]]
=== UI component

.Structure of the UI Component
image::UiClassDiagram.png[width="800"]

*API* : link:{repoURL}/src/main/java/seedu/address/ui/Ui.java[`Ui.java`]

The UI consists of a `MainWindow` that is made up of parts e.g.`CommandBox`, `ResultDisplay`, `PersonListPanel`, `EventDetailsPanel`, `StatusBarFooter`, `BrowserPanel` etc. All these, including the `MainWindow`, inherit from the abstract `UiPart` class.

The `UI` component uses JavaFx UI framework. The layout of these UI parts are defined in matching `.fxml` files that are in the `src/main/resources/view` folder. For example, the layout of the link:{repoURL}/src/main/java/seedu/address/ui/MainWindow.java[`MainWindow`] is specified in link:{repoURL}/src/main/resources/view/MainWindow.fxml[`MainWindow.fxml`]

The `UI` component,

* Executes user commands using the `Logic` component.
* Binds itself to some data in the `Model` so that the UI can auto-update when data in the `Model` change.
* Responds to events raised from various parts of the App and updates the UI accordingly.

[[Design-Logic]]
=== Logic component

[[fig-LogicClassDiagram]]
.Structure of the Logic Component
image::LogicClassDiagram.png[width="800"]

*API* :
link:{repoURL}/src/main/java/seedu/address/logic/Logic.java[`Logic.java`]

.  `Logic` uses the `AddressBookParser` class to parse the user command.
.  This results in a `Command` object which is executed by the `LogicManager`.
.  The command execution can affect the `Model` (e.g. adding a person) and/or raise events.
.  The result of the command execution is encapsulated as a `CommandResult` object which is passed back to the `Ui`.

Given below is the Sequence Diagram for interactions within the `Logic` component for the `execute("delete 1")` API call.

.Interactions Inside the Logic Component for the `delete 1` Command
image::DeletePersonSdForLogic.png[width="800"]

[[Design-Model]]
=== Model component

.Structure of the Model Component
image::ModelClassDiagramUpdated.png[width="800"]

*API* : link:{repoURL}/src/main/java/seedu/address/model/Model.java[`Model.java`]

The `Model`,

* stores a `UserPref` object that represents the user's preferences.
* stores the EventOrganiser data.
* exposes an unmodifiable `ObservableList<Person>` and `ObservableList<Event>` that can be 'observed' e.g. the UI can be bound to this list so that the UI automatically updates when the data in the list change.
* does not depend on any of the other three components.

The Event class contains attributes which depend on the Person and UniquePersonList classes.
These are the event organiser (Person), the list of participants (a UniquePersonList).
Each event also contains a list of polls, which contains a voter list for each option, which is a UniquePersonList.

[NOTE]
As a more OOP model, we can store a `Tag` list in `Address Book`, which `Person` can reference. This would allow `Address Book` to only require one `Tag` object per unique `Tag`, instead of each `Person` needing their own `Tag` object. An example of how such a model may look like is given below. +
 +
image:ModelClassBetterOopDiagram.png[width="800"]

[[Design-Storage]]
=== Storage component

.Structure of the Storage Component
image::StorageClassDiagram.png[width="800"]

*API* : link:{repoURL}/src/main/java/seedu/address/storage/Storage.java[`Storage.java`]

The `Storage` component,

* can save `UserPref` objects in json format and read it back.
* can save the Event Organiser data in xml format and read it back.

Each event contains references to persons in the list of persons in the event organiser.
The storage component stores these people in the form of XmlPersonIndex objects, which are constructed from the index of the person as it is stored in the event organiser.
When converting XmlAdaptedEvent objects back to a model type Event object, the XmlPersonIndex must be converted to the corresponding person in the event organiser person list.

[[Design-Commons]]
=== Common classes

Classes used by multiple components are in the `seedu.addressbook.commons` package.

== Implementation

This section describes some noteworthy details on how certain features are implemented.

// tag::login/logout[]
=== Login/logout feature

==== Current Implementation

This section explains the implementation of the components associated with the login feature.

image::LoginFeature_SequenceDiagram_includes_Logic_Model.png[width="800"]

After the execute() method of the login command is called,  the login command authenticates the user.
A commandException will be thrown in the following 2 scenarios:

* When the user does not exist.

* When there is already a user that has been logged in.

On the other hand, after the execute() method of the log out command is called,
a commandException will be thrown when there isn't any user that is logged in.

image::LoginFeature_SequenceDiagram_includes_Logic_EventsCenter_UI.png[width="800"]

After a user logs in or logs out, the modelManager will raise an UserIsLoginStatusChangedEvent to update the UI.

For example, if the user, Alex Yeoh, wants to login to his account, the following image is what he will see before he logs in.

image::LoginFeatureBeforeLogin.png[width="300"]

After Alex Yeoh logs in, the UI will automatically be updated upon successful login as indicated by the change in colour
of the user's name from white to green as shown in the image below. The user's name will remain in green as long as he is logged in. After he logs out,
the colour of his name will revert back to white as shown in the image above.

image::LoginFeatureAfterLogin.png[width="300"]

==== Design Considerations

===== Aspect: security

* **Alternative 1**(Current implementation) : store the password for each user as an attribute of Person class
** Pros: Enforce some level of authentication with minimal code
** Cons: Level of security is minimal

* **Alternative 2** : Use Java API to hash the password
** Pros: Higher level of security for users
** Cons: May not be pertinent for the EventOrganiser app as of v1.3

* **Alternative 3** : implement "login" via select command
** Pros: Easy to implement
** Cons: No security at all
// end::login/logout[]

////
// tag::undoredo[]
=== Undo/Redo feature
==== Current Implementation

The undo/redo mechanism is facilitated by `VersionedAddressBook`.
It extends `AddressBook` with an undo/redo history, stored internally as an `addressBookStateList` and `currentStatePointer`.
Additionally, it implements the following operations:

* `VersionedAddressBook#commit()` -- Saves the current address book state in its history.
* `VersionedAddressBook#undo()` -- Restores the previous address book state from its history.
* `VersionedAddressBook#redo()` -- Restores a previously undone address book state from its history.

These operations are exposed in the `Model` interface as `Model#commitAddressBook()`, `Model#undoAddressBook()` and `Model#redoAddressBook()` respectively.

Given below is an example usage scenario and how the undo/redo mechanism behaves at each step.

Step 1. The user launches the application for the first time. The `VersionedAddressBook` will be initialized with the initial address book state, and the `currentStatePointer` pointing to that single address book state.

image::UndoRedoStartingStateListDiagram.png[width="800"]

Step 2. The user executes `delete 5` command to delete the 5th person in the address book. The `delete` command calls `Model#commitAddressBook()`, causing the modified state of the address book after the `delete 5` command executes to be saved in the `addressBookStateList`, and the `currentStatePointer` is shifted to the newly inserted address book state.

image::UndoRedoNewCommand1StateListDiagram.png[width="800"]

Step 3. The user executes `add n/David ...` to add a new person. The `add` command also calls `Model#commitAddressBook()`, causing another modified address book state to be saved into the `addressBookStateList`.

image::UndoRedoNewCommand2StateListDiagram.png[width="800"]

[NOTE]
If a command fails its execution, it will not call `Model#commitAddressBook()`, so the address book state will not be saved into the `addressBookStateList`.

Step 4. The user now decides that adding the person was a mistake, and decides to undo that action by executing the `undo` command. The `undo` command will call `Model#undoAddressBook()`, which will shift the `currentStatePointer` once to the left, pointing it to the previous address book state, and restores the address book to that state.

image::UndoRedoExecuteUndoStateListDiagram.png[width="800"]

[NOTE]
If the `currentStatePointer` is at index 0, pointing to the initial address book state, then there are no previous address book states to restore. The `undo` command uses `Model#canUndoAddressBook()` to check if this is the case. If so, it will return an error to the user rather than attempting to perform the undo.

The following sequence diagram shows how the undo operation works:

image::UndoRedoSequenceDiagram.png[width="800"]

The `redo` command does the opposite -- it calls `Model#redoAddressBook()`, which shifts the `currentStatePointer` once to the right, pointing to the previously undone state, and restores the address book to that state.

[NOTE]
If the `currentStatePointer` is at index `addressBookStateList.size() - 1`, pointing to the latest address book state, then there are no undone address book states to restore. The `redo` command uses `Model#canRedoAddressBook()` to check if this is the case. If so, it will return an error to the user rather than attempting to perform the redo.

Step 5. The user then decides to execute the command `list`. Commands that do not modify the address book, such as `list`, will usually not call `Model#commitAddressBook()`, `Model#undoAddressBook()` or `Model#redoAddressBook()`. Thus, the `addressBookStateList` remains unchanged.

image::UndoRedoNewCommand3StateListDiagram.png[width="800"]

Step 6. The user executes `clear`, which calls `Model#commitAddressBook()`. Since the `currentStatePointer` is not pointing at the end of the `addressBookStateList`, all address book states after the `currentStatePointer` will be purged. We designed it this way because it no longer makes sense to redo the `add n/David ...` command. This is the behavior that most modern desktop applications follow.

image::UndoRedoNewCommand4StateListDiagram.png[width="800"]

The following activity diagram summarizes what happens when a user executes a new command:

image::UndoRedoActivityDiagram.png[width="650"]

==== Design Considerations

===== Aspect: How undo & redo executes

* **Alternative 1 (current choice):** Saves the entire address book.
** Pros: Easy to implement.
** Cons: May have performance issues in terms of memory usage.
* **Alternative 2:** Individual command knows how to undo/redo by itself.
** Pros: Will use less memory (e.g. for `delete`, just save the person being deleted).
** Cons: We must ensure that the implementation of each individual command are correct.

===== Aspect: Data structure to support the undo/redo commands

* **Alternative 1 (current choice):** Use a list to store the history of address book states.
** Pros: Easy for new Computer Science student undergraduates to understand, who are likely to be the new incoming developers of our project.
** Cons: Logic is duplicated twice. For example, when a new command is executed, we must remember to update both `HistoryManager` and `VersionedAddressBook`.
* **Alternative 2:** Use `HistoryManager` for undo/redo
** Pros: We do not need to maintain a separate list, and just reuse what is already in the codebase.
** Cons: Requires dealing with commands that have already been undone: We must remember to skip these commands. Violates Single Responsibility Principle and Separation of Concerns as `HistoryManager` now needs to do two different things.
// end::undoredo[]
////

// tag::poll[]
=== Poll feature

==== Current implementation
This section explains the implementation of the features associated with the Poll class of each Event while detailing some implementation details of the Event class.
The relevant commands which are callable by the user to be discussed are:

* `AddPollCommand` - adds a new Poll to the event given the name of the poll to be created.
* `AddPollOptionCommand` - adds a new poll option to the poll given the poll index and the name of the option to be added.
* `VoteCommand` - adds the current user as a voter to the given option.
* `AddTimePollCommand` - creates a new TimePoll automatically populated with options based on the schedules of the event participants.

For all the above commands, the event must first be selected using the `selectEvent` command, which will set the `currentEvent` through the `Model#setSelectedEvent()` method.
This is done to ensure that users do not have to continually specify the event for which the Poll commands are called for every command.
This is on top of the `currentUser` in the Model which was already selected through the `LoginCommand`.

There are two types of Polls which extends from the abstract class AbstractPoll: Poll and TimePoll.
Each AbstractPoll object contains a `HashMap<String, UniquePersonList>` attribute which stores each option as a string and the list of voters to that particular option as a UniquePersonList.

image::PollClassDiagram.png[width="800"]

When storing the Poll object in the Storage component, since the XML format does not support the HashMap format,
each entry of the HashMap must be converted to a XmlAdaptedPollEntry.
Each XmlAdaptedPollEntry contains the option as a String as well as a list of XmlPersonIndex objects,
which serve as pointers to the actual Person objects stored in the event organiser.

As an example, the following sequence diagram illustrates the workings of the `VoteCommand`.

image::VoteSequenceDiagram.png[width="800"]

As stated above, since Model already stores the current user and the selected event from prior user commands,
the Model can call the correct Event e and Person object in the `addVoteToPoll` method. If there is no logged-in user,
a `NoUserLoggedInException` is thrown, and if there is no selected event, a `NoEventSelectedException` is thrown.

In addition, four other possible exceptions might be thrown by the VoteCommand:

* A user must have already joined the event as a participant, or be on the invite list in order to vote, failing which, a UserNotJoinedEventException is thrown.
* A user must not already have voted for that particular option in the poll already. This is enforced by the UniquePersonList, which throws a DuplicatePersonException if someone tries to vote twice.
* A poll must exist at the given poll index for the selected event, else, an IndexOutOfBoundsException is thrown.
* The given option must exist in the selected poll, else, an IllegalArgumentException is thrown.

The other commands `AddPollCommand` and `AddPollOptionCommand` follow a very similar structure.
The sequence diagram within the model for the `AddPollCommand` is illustrated here:

image::AddPollSequenceDiagram.png[width="600"]

In all cases, the contents of the poll is returned to the calling Command object as String through the `Poll#displayPoll()` method.
The displayed details of the poll contains the most popular options, computed using the `Poll#getPopularOptions()` method.
This method returns an empty list if there no user has voted for any option yet.
A new `DisplayPollEvent` is then posted to the EventsCenter, which is handled by the PollDisplayPanel in the UI component.

The `TimePoll` class extends from the abstract `AbstractPoll` class which is constructed by calling the `AddTimePollCommand`.
This command automatically generates a list of times based on the schedules of the persons on the event invite list,
and a specified date range in the user input. The two dates must not be more than a month apart.
The TimePoll shares most of its functionality with Poll, except that users may not add new options.
At this point, the TimePoll does not automatically update when event participants leave or join the event.
Hence, the event organiser must wait for all participants to be confirmed before adding a TimePoll.

==== Design considerations

===== Aspect: The relationship between `Poll` and `TimePoll`

* **Alternative 1** (Current implementation): Design them as separate classes which both inherit from an abstract `AbstractPoll` class.
** Pros: Allows for future extendability from the abstract Poll class eg additional types of Polls (location, date) which constrain the option types
 and include additional features to recommend the best option eg most convenient location by distance for participants.

* **Alternative 2**: Allow `TimePoll` to extend from the `Poll` class.
** Pros: The two classes differ only in that `TimePoll` has the augmented feature of generating options from the schedule of event participants.
** Cons: Unable to constrain the input and prevent users from adding the wrong format for options into `TimePoll`, since this would violate the Liskov Substitution Principle.

===== Aspect: Storage of voters in Poll

* **Alternative 1** (Current implementation): Store the voters as Persons.
** Pros: All information about the voters are stored.
** Cons: Need for complete reference to the actual person via the XmlPersonIndex class in storage, rather than duplicating the person details.
The voter list must also be manually updated every time the person details are updated.

* **Alternative 2**: Store only the names of voters.
** Pros: No need for complete reference to the actual person via the XmlPersonIndex class in storage.
** Cons: Some persons might share the same name. It is also not extendable for future versions where the data/attributes of the voters might be relevant to computing the best option.
//end::poll[]

// tag::schedule[]
=== Schedule feature
==== Current implementation
This section explains the implementation of the features associated with the Schedule class of each Schedule while detailing some implementation details of the Schedule class. The relevant commands which are callable by the user to be discussed are:

`EditUserCommand` - The base Edit command for person with two additions - Schedule and Schedule Update parameter

`MaxScheduleCommand` - Compare two persons' schedules and return the common free time.

==== Design considerations

For EditCommand, despite the fact that schedule piggybacks off the original edit command, the original person did not include a schedule object, and so adjustments have to be made.
Firstly, if the person does not have the schedule object, a new schedule object would be created by the logic layer. This is to ensure backwards compatibility with past test cases without schedule objects. Next, the schedule needs to be stored in the xml file in a concise way so that it would not be bloated. As the persons in the applications are students, we can be certain that their schedules will be likely the same through the week, thus only the weekly schedule is stored.


===== Aspect: Storage of schedule in person

* **Alternative 1** Store all schedule as a slot just like how a calendar does, which includes day, time, etc.
** Pros: All information about the schedule are stored.
** Cons: Expensive storage as a lot of data needs to be stored. Management of schedule may become an issue here if the schedule needs to store for more than a year worth.

* **Alternative 2:** (current implementation) Store weekly schedule
** Pros: Cheap storage as only a subset of schedule needs to be stored. Possible O(1) access times.
** Cons: Explicit details of the schedule may be lost such as an event that appears only once a year.

We have chosen the second option for the ease of storage management and low access times.
To store the schedule, a unique approach of using bit counters is used.
Each bit stores a 30 minute block, totalling to 24 hours * 2 30-mins * 7 days =  336 bits.
1-bit signifies an occupied slot while a 0-bit signifies an empty slot.
This 336 bit-string is then stored as a string in the xml.
However, in the application, it will stored as a two-dimensional array [7][48].
This allows O(1) access times for each slot, while only requiring O(n) on startup to reload the bit-string into an array.

Each bit string is then translated into a Slot, detailing its time of the day and the day of the week, to be used by the application

image::ScheduleDiagram.png[width="800"]

As manipulating bit strings may be complicated, getter, setter and merger methods are provided for any external access to the schedule. This allows easy use of the specific slots in the schedule without heavy calculation and memorisation of bits.

* Schedule has a copy constructor to create duplicates for the schedule objects. Useful for any commands that manipulate schedule objects 
* Note that schedule only takes in Slots as an argument for its methods. Slot consists of a Time object and a Day object. This is to ensure Separation of Concerns in the schedule manipulation as schedule does not need to be ensure that the argument input is valid; The Time and Day objects will ensure the validity of values.
* All commands that feed input into schedule should also validate the data input. In the event such data is not sanitised, defensive programming has been employed in Day and Time to deny the data.

===== Aspect: Schedule Update

To effect a schedule update, a pair of strings "time of the day" and "day of the week" is to be entered. The strings are then converted into a Slot(which contains Time and Day objects). The setter methods of schedule is then called to effect the change. Note that this is a "bit flip" operation, so it will set a free Slot to an occupied Slot and vice versa.

===== Aspect: MaxSchedule Command

Similarly, as bitwise operations are allowed, two or more persons' schedule are or-ed together to form a new schedule object. This schedule object is then translated into slots and print back to the application.

Noted that we have 336 slots thus it is highly possible that maxSchedule command will return a large number of free time slots. Thus the sl/ tag is used to limit the range of free time displayed.
It is implemented in the format of XXXX-XXXX where XXXX is the time slot in 24 hour format.

The sequence diagram of MaxSchedule command is illustrated below.

image::MaxScheduleDiagram.png[width="800"]

As noted from the schedule component, MaxSchedule command passes a Time object into the schedule. This abstraction of Time/Day objects reduces the possibility of invalid input resulting from the user input in MaxSchedule command.

// end::schedule[]

// tag::timetable[]
=== TimeTable feature

==== Current implementation
This section explains the implementation of the features associated with the TimeTableUtil and Timetable class of each TimeTable while detailing some implementation details of the TimeTable and TimeTableUtil class. The relevant commands which are callable by the user to be discussed are:

==== Design considerations

`EditUserCommand` - The base Edit command for person with one addition - Timetable parameter

`AddUserCommand` - The base Add command for person with one addition - Timetable parameter

TimeTable is a collection of data downloaded from an external source, detailing the students' weekly schedule for the semester. This is to allow ease of access for the students, without having them to enter their schedules manually using schedule update parameters in the EditCommand.
This timetable is also not stored inside the xml, but rather immediately translated into a schedule object to be passed back to the application, which would store the object inside the model.


===== Aspect: Timetable Source

* **Alternative 1** Google Calendar
** Pros: Academic and non-academic calendar events can be downloaded.
** Cons: Not tailored for NUS students - students must acquire their academic events from their own CORS (NUS module slot bidding) result to populate their own google calendar. Google authorization token (per user) will have to stored securely.

* **Alternative 2:** (current implementation) NusMod
** Pros: Academic events can be downloaded. Many students are already using this platform to store their academic events.
** Cons: Non-academic events cannot be downloaded from this source.

NusMods will be used to provide academic events for the student. As for their non-academic events, he can use schedule update to manually update those slots.
This way, we will be able to provide the most convenient way for the student to populate the schedule.

===== Aspect: Timetable Download

As nusmods.com is an external web server, internet access needs to be checked first. Following up, the nusmods.com gives the user a modsn.com shortlink which can translated back to a nusmods.com/... full link, if he wants to share his timetable with himself or others. Finally, a valid nusmods.com timetable would include json data in its GET parameters. All of these must be fulfilled or else a Invalid Nusmods link will be returned to the application.

The sequence diagram for the timetable download is illustrated below.

image::TimeTableScheduleDiagram.png[width="800"]


This is the valid short link of the nusmod timetable.
```
http://modsn.us/H4v8s
```

The above short link will be parsed into the full nusmods link as followed:
```
https://nusmods.com/timetable/sem-1/share?CS2102=LEC:1,TUT:11&CS2103=LEC:1,TUT:01&CS2105=LEC:1,TUT:16&CS2106=LAB:09,LEC:1,TUT:09&MA1521=LEC:1,TUT:4&UCV2209=SEM:01
```

Breakdown on how to obtain the full timetable and convert it into a schedule.

Step 1. We can easily obtain the person's timetable by splitting the GET parameters by ';' delimiter. The resulting array would contain Module Code /=/ Lesson Type /:/ Number Slot.

Step 2. Then, to obtain the full details of the module (including all lessons and all slots), we can use the NUSMODS API detailed here https://github.com/nusmodifications/nusmods-api.

Step 3. We will then filter out the lessons obtained in step 1 from the full detail in step 2.

Step 4. The filtered lessons is then converted into a list of Slot.

Step 5. The list of Slot will be passed in a Schedule constructor to generate a new schedule.

Step 6. The new schedule object is returned to the application.

// end::timetable[]

//tag::addDeleteFriend[]
=== Add/Delete Friend feature

==== Current implementation
This section explains the implementation of the addition/deletion of friends feature associated with each user in the event organizer. The relevant commands which are callable by the user to be discussed are:

* `AddFriendCommand` - takes in a pair of indexes and makes a pair of persons associated with the indexes to be friends with each other
* `DeleteFriendCommand` - takes in a pair of indexes and makes a pair of persons associated with the indexes no longer friends with each other

The following sequence diagram for AddFriendCommand is illustrated below:

image::AddFriendCommand.png[width="800"]

==== Design considerations

===== Aspect: Bilateral friendships

Friendships have to be bilateral, so if person A is a friend of person B, then person B is also a friend of person A.

To specify the friendship relation between two users, both the indexes of the users have to be provided. The command format is addFriend [INDEX,INDEX], where INDEX has to be a positive number that is greater than 0, less than or equals to the current greatest index, and distinct from the other INDEX.

===== Aspect: Friend class

Like other attributes, we represents a friend of a Person using a Friend class. The Friend class has a constructor which takes in a Person object, and initializes the string field `friendAttributes` that combines the 4 main attributes of Person (name, phone, email, address) in string form using a vertical bar(|), since these attributes act as the primary identification for a Person. Example:
For a person with name Alex Yeoh, phone 87438807, email alexyeoh@example.com, address Blk 30 Geylang Street 29, #06-40, the Friend object's `friendAttributes` string field will be 'Alex Yeoh|87438807|alexyeoh@example.com|Blk 30 Geylang Street 29, #06-40'.

In the Person class, his/her friends will be represented using a Set of Friend objects as the friend list. Each time `AddFriendCommand` is executed, once the checking is done (as described in the next aspect), a copy each of the 2 persons (2 new Person objects) represented by the index will be created. Then the addFriendInList() method from Person class will be called by each of them on each other, which creases a Friend object as described by the paragraph above and adds it to each of their friend lists. Finally, both these new Person objects will replace the old Person objects in the Model using the updatePerson() method from the Model class.

In the display panel where the friend list of a user is displayed, the friend of that user will be identified by the first token of the string field in the Friend object separated by the delimiter '|' (due to the toString() method in Friend class), which is the actual name of the friend.

===== Aspect: Friendships can only be added once, deleted if they are currently friends

Each person can only be added as a friend once by another person. If two persons are already friends and `AddFriendCommand` is called again on these two persons, each of their friend lists will be checked using the hasFriendInList() method in Person class to confirm that each other is already on it, hence the same person will not be added twice.

Similarly, if two persons are not yet friends, or were friends but the friendship was deleted, if `DeleteFriendCommand` is called on these two persons, each of their friend lists will be checked to confirm that each other is not on it, hence the delete action will not be taken.

===== Aspect: Deletion/Modification of attributes of a person who is currently on the friend list of another person

The friend lists of each user have to be constantly updated when a person is deleted from the Event Organizer or his attributes are modified (such as name change).

The following scenario describes what happens if person A is already on the friend list of person B (person A and B are friends with each other).

Person A gets deleted from the Event Organizer:
This triggers the updateFriendListsDueToDeletedPerson() function in the `DeleteUserCommand` class, which searches through the friend lists of all the other persons. If someone has person A in their friend list (such as person B), person A will be removed from his/her friend list.

Person A's attributes gets modified (eg change name/phone):
This triggers the updateFriendListsDueToEditedPerson() function in the `EditUserCommand` class, which searches through the friend lists of all the other persons. If someone has person A in their friend list (such as person B), the original Friend object will be replaced by the new Friend object created using the new attributes of person A.

// end:::addDeleteFriend[]

=== Logging

We are using `java.util.logging` package for logging. The `LogsCenter` class is used to manage the logging levels and logging destinations.

* The logging level can be controlled using the `logLevel` setting in the configuration file (See <<Implementation-Configuration>>)
* The `Logger` for a class can be obtained using `LogsCenter.getLogger(Class)` which will log messages according to the specified logging level
* Currently log messages are output through: `Console` and to a `.log` file.

*Logging Levels*

* `SEVERE` : Critical problem detected which may possibly cause the termination of the application
* `WARNING` : Can continue, but with caution
* `INFO` : Information showing the noteworthy actions by the App
* `FINE` : Details that is not usually noteworthy but may be useful in debugging e.g. print the actual list instead of just its size

[[Implementation-Configuration]]
=== Configuration

Certain properties of the application can be controlled (e.g App name, logging level) through the configuration file (default: `config.json`).

== Documentation

We use asciidoc for writing documentation.

[NOTE]
We chose asciidoc over Markdown because asciidoc, although a bit more complex than Markdown, provides more flexibility in formatting.

=== Editing Documentation

See <<UsingGradle#rendering-asciidoc-files, UsingGradle.adoc>> to learn how to render `.adoc` files locally to preview the end result of your edits.
Alternatively, you can download the AsciiDoc plugin for IntelliJ, which allows you to preview the changes you have made to your `.adoc` files in real-time.

=== Publishing Documentation

See <<UsingTravis#deploying-github-pages, UsingTravis.adoc>> to learn how to deploy GitHub Pages using Travis.

=== Converting Documentation to PDF format

We use https://www.google.com/chrome/browser/desktop/[Google Chrome] for converting documentation to PDF format, as Chrome's PDF engine preserves hyperlinks used in webpages.

Here are the steps to convert the project documentation files to PDF format.

.  Follow the instructions in <<UsingGradle#rendering-asciidoc-files, UsingGradle.adoc>> to convert the AsciiDoc files in the `docs/` directory to HTML format.
.  Go to your generated HTML files in the `build/docs` folder, right click on them and select `Open with` -> `Google Chrome`.
.  Within Chrome, click on the `Print` option in Chrome's menu.
.  Set the destination to `Save as PDF`, then click `Save` to save a copy of the file in PDF format. For best results, use the settings indicated in the screenshot below.

.Saving documentation as PDF files in Chrome
image::chrome_save_as_pdf.png[width="300"]

[[Docs-SiteWideDocSettings]]
=== Site-wide Documentation Settings

The link:{repoURL}/build.gradle[`build.gradle`] file specifies some project-specific https://asciidoctor.org/docs/user-manual/#attributes[asciidoc attributes] which affects how all documentation files within this project are rendered.

[TIP]
Attributes left unset in the `build.gradle` file will use their *default value*, if any.

[cols="1,2a,1", options="header"]
.List of site-wide attributes
|===
|Attribute name |Description |Default value

|`site-name`
|The name of the website.
If set, the name will be displayed near the top of the page.
|_not set_

|`site-githuburl`
|URL to the site's repository on https://github.com[GitHub].
Setting this will add a "View on GitHub" link in the navigation bar.
|_not set_

|`site-seedu`
|Define this attribute if the project is an official SE-EDU project.
This will render the SE-EDU navigation bar at the top of the page, and add some SE-EDU-specific navigation items.
|_not set_

|===

[[Docs-PerFileDocSettings]]
=== Per-file Documentation Settings

Each `.adoc` file may also specify some file-specific https://asciidoctor.org/docs/user-manual/#attributes[asciidoc attributes] which affects how the file is rendered.

Asciidoctor's https://asciidoctor.org/docs/user-manual/#builtin-attributes[built-in attributes] may be specified and used as well.

[TIP]
Attributes left unset in `.adoc` files will use their *default value*, if any.

[cols="1,2a,1", options="header"]
.List of per-file attributes, excluding Asciidoctor's built-in attributes
|===
|Attribute name |Description |Default value

|`site-section`
|Site section that the document belongs to.
This will cause the associated item in the navigation bar to be highlighted.
One of: `UserGuide`, `DeveloperGuide`, ``LearningOutcomes``{asterisk}, `AboutUs`, `ContactUs`

_{asterisk} Official SE-EDU projects only_
|_not set_

|`no-site-header`
|Set this attribute to remove the site navigation bar.
|_not set_

|===

=== Site Template

The files in link:{repoURL}/docs/stylesheets[`docs/stylesheets`] are the https://developer.mozilla.org/en-US/docs/Web/CSS[CSS stylesheets] of the site.
You can modify them to change some properties of the site's design.

The files in link:{repoURL}/docs/templates[`docs/templates`] controls the rendering of `.adoc` files into HTML5.
These template files are written in a mixture of https://www.ruby-lang.org[Ruby] and http://slim-lang.com[Slim].

[WARNING]
====
Modifying the template files in link:{repoURL}/docs/templates[`docs/templates`] requires some knowledge and experience with Ruby and Asciidoctor's API.
You should only modify them if you need greater control over the site's layout than what stylesheets can provide.
The SE-EDU team does not provide support for modified template files.
====

[[Testing]]
== Testing

=== Running Tests

There are three ways to run tests.

[TIP]
The most reliable way to run tests is the 3rd one. The first two methods might fail some GUI tests due to platform/resolution-specific idiosyncrasies.

*Method 1: Using IntelliJ JUnit test runner*

* To run all tests, right-click on the `src/test/java` folder and choose `Run 'All Tests'`
* To run a subset of tests, you can right-click on a test package, test class, or a test and choose `Run 'ABC'`

*Method 2: Using Gradle*

* Open a console and run the command `gradlew clean allTests` (Mac/Linux: `./gradlew clean allTests`)

[NOTE]
See <<UsingGradle#, UsingGradle.adoc>> for more info on how to run tests using Gradle.

*Method 3: Using Gradle (headless)*

Thanks to the https://github.com/TestFX/TestFX[TestFX] library we use, our GUI tests can be run in the _headless_ mode. In the headless mode, GUI tests do not show up on the screen. That means the developer can do other things on the Computer while the tests are running.

To run tests in headless mode, open a console and run the command `gradlew clean headless allTests` (Mac/Linux: `./gradlew clean headless allTests`)

=== Types of tests

We have two types of tests:

.  *GUI Tests* - These are tests involving the GUI. They include,
.. _System Tests_ that test the entire App by simulating user actions on the GUI. These are in the `systemtests` package.
.. _Unit tests_ that test the individual components. These are in `seedu.address.ui` package.
.  *Non-GUI Tests* - These are tests not involving the GUI. They include,
..  _Unit tests_ targeting the lowest level methods/classes. +
e.g. `seedu.address.commons.StringUtilTest`
..  _Integration tests_ that are checking the integration of multiple code units (those code units are assumed to be working). +
e.g. `seedu.address.storage.StorageManagerTest`
..  Hybrids of unit and integration tests. These test are checking multiple code units as well as how the are connected together. +
e.g. `seedu.address.logic.LogicManagerTest`


=== Troubleshooting Testing
**Problem: `HelpWindowTest` fails with a `NullPointerException`.**

* Reason: One of its dependencies, `HelpWindow.html` in `src/main/resources/docs` is missing.
* Solution: Execute Gradle task `processResources`.

== Dev Ops

=== Build Automation

See <<UsingGradle#, UsingGradle.adoc>> to learn how to use Gradle for build automation.

=== Continuous Integration

We use https://travis-ci.org/[Travis CI] and https://www.appveyor.com/[AppVeyor] to perform _Continuous Integration_ on our projects. See <<UsingTravis#, UsingTravis.adoc>> and <<UsingAppVeyor#, UsingAppVeyor.adoc>> for more details.

=== Coverage Reporting

We use https://coveralls.io/[Coveralls] to track the code coverage of our projects. See <<UsingCoveralls#, UsingCoveralls.adoc>> for more details.

=== Documentation Previews
When a pull request has changes to asciidoc files, you can use https://www.netlify.com/[Netlify] to see a preview of how the HTML version of those asciidoc files will look like when the pull request is merged. See <<UsingNetlify#, UsingNetlify.adoc>> for more details.

=== Making a Release

Here are the steps to create a new release.

.  Update the version number in link:{repoURL}/src/main/java/seedu/address/MainApp.java[`MainApp.java`].
.  Generate a JAR file <<UsingGradle#creating-the-jar-file, using Gradle>>.
.  Tag the repo with the version number. e.g. `v0.1`
.  https://help.github.com/articles/creating-releases/[Create a new release using GitHub] and upload the JAR file you created.

=== Managing Dependencies

A project often depends on third-party libraries. For example, Address Book depends on the http://wiki.fasterxml.com/JacksonHome[Jackson library] for XML parsing. Managing these _dependencies_ can be automated using Gradle. For example, Gradle can download the dependencies automatically, which is better than these alternatives. +
a. Include those libraries in the repo (this bloats the repo size) +
b. Require developers to download those libraries manually (this creates extra work for developers)

[[GetStartedProgramming]]
[appendix]
== Suggested Programming Tasks to Get Started
////
Suggested path for new programmers:

1. First, add small local-impact (i.e. the impact of the change does not go beyond the component) enhancements to one component at a time. Some suggestions are given in <<GetStartedProgramming-EachComponent>>.

2. Next, add a feature that touches multiple components to learn how to implement an end-to-end feature across all components. <<GetStartedProgramming-RemarkCommand>> explains how to go about adding such a feature.

[[GetStartedProgramming-EachComponent]]
=== Improving each component

Each individual exercise in this section is component-based (i.e. you would not need to modify the other components to get it to work).

[discrete]
==== `Logic` component

*Scenario:* You are in charge of `logic`. During dog-fooding, your team realize that it is troublesome for the user to type the whole command in order to execute a command. Your team devise some strategies to help cut down the amount of typing necessary, and one of the suggestions was to implement aliases for the command words. Your job is to implement such aliases.

[TIP]
Do take a look at <<Design-Logic>> before attempting to modify the `Logic` component.

. Add a shorthand equivalent alias for each of the individual commands. For example, besides typing `clear`, the user can also type `c` to remove all persons in the list.
+
****
* Hints
** Just like we store each individual command word constant `COMMAND_WORD` inside `*Command.java` (e.g.  link:{repoURL}/src/main/java/seedu/address/logic/commands/FindCommand.java[`FindCommand#COMMAND_WORD`], link:{repoURL}/src/main/java/seedu/address/logic/commands/DeleteCommand.java[`DeleteCommand#COMMAND_WORD`]), you need a new constant for aliases as well (e.g. `FindCommand#COMMAND_ALIAS`).
** link:{repoURL}/src/main/java/seedu/address/logic/parser/AddressBookParser.java[`AddressBookParser`] is responsible for analyzing command words.
* Solution
** Modify the switch statement in link:{repoURL}/src/main/java/seedu/address/logic/parser/AddressBookParser.java[`AddressBookParser#parseCommand(String)`] such that both the proper command word and alias can be used to execute the same intended command.
** Add new tests for each of the aliases that you have added.
** Update the user guide to document the new aliases.
** See this https://github.com/se-edu/addressbook-level4/pull/785[PR] for the full solution.
****

[discrete]
==== `Model` component

*Scenario:* You are in charge of `model`. One day, the `logic`-in-charge approaches you for help. He wants to implement a command such that the user is able to remove a particular tag from everyone in the address book, but the model API does not support such a functionality at the moment. Your job is to implement an API method, so that your teammate can use your API to implement his command.

[TIP]
Do take a look at <<Design-Model>> before attempting to modify the `Model` component.

. Add a `removeTag(Tag)` method. The specified tag will be removed from everyone in the address book.
+
****
* Hints
** The link:{repoURL}/src/main/java/seedu/address/model/Model.java[`Model`] and the link:{repoURL}/src/main/java/seedu/address/model/AddressBook.java[`AddressBook`] API need to be updated.
** Think about how you can use SLAP to design the method. Where should we place the main logic of deleting tags?
**  Find out which of the existing API methods in  link:{repoURL}/src/main/java/seedu/address/model/AddressBook.java[`AddressBook`] and link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`] classes can be used to implement the tag removal logic. link:{repoURL}/src/main/java/seedu/address/model/AddressBook.java[`AddressBook`] allows you to update a person, and link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`] allows you to update the tags.
* Solution
** Implement a `removeTag(Tag)` method in link:{repoURL}/src/main/java/seedu/address/model/AddressBook.java[`AddressBook`]. Loop through each person, and remove the `tag` from each person.
** Add a new API method `deleteTag(Tag)` in link:{repoURL}/src/main/java/seedu/address/model/ModelManager.java[`ModelManager`]. Your link:{repoURL}/src/main/java/seedu/address/model/ModelManager.java[`ModelManager`] should call `AddressBook#removeTag(Tag)`.
** Add new tests for each of the new public methods that you have added.
** See this https://github.com/se-edu/addressbook-level4/pull/790[PR] for the full solution.
****

[discrete]
==== `Ui` component

*Scenario:* You are in charge of `ui`. During a beta testing session, your team is observing how the users use your address book application. You realize that one of the users occasionally tries to delete non-existent tags from a contact, because the tags all look the same visually, and the user got confused. Another user made a typing mistake in his command, but did not realize he had done so because the error message wasn't prominent enough. A third user keeps scrolling down the list, because he keeps forgetting the index of the last person in the list. Your job is to implement improvements to the UI to solve all these problems.

[TIP]
Do take a look at <<Design-Ui>> before attempting to modify the `UI` component.

. Use different colors for different tags inside person cards. For example, `friends` tags can be all in brown, and `colleagues` tags can be all in yellow.
+
**Before**
+
image::getting-started-ui-tag-before.png[width="300"]
+
**After**
+
image::getting-started-ui-tag-after.png[width="300"]
+
****
* Hints
** The tag labels are created inside link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[the `PersonCard` constructor] (`new Label(tag.tagName)`). https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Label.html[JavaFX's `Label` class] allows you to modify the style of each Label, such as changing its color.
** Use the .css attribute `-fx-background-color` to add a color.
** You may wish to modify link:{repoURL}/src/main/resources/view/DarkTheme.css[`DarkTheme.css`] to include some pre-defined colors using css, especially if you have experience with web-based css.
* Solution
** You can modify the existing test methods for `PersonCard` 's to include testing the tag's color as well.
** See this https://github.com/se-edu/addressbook-level4/pull/798[PR] for the full solution.
*** The PR uses the hash code of the tag names to generate a color. This is deliberately designed to ensure consistent colors each time the application runs. You may wish to expand on this design to include additional features, such as allowing users to set their own tag colors, and directly saving the colors to storage, so that tags retain their colors even if the hash code algorithm changes.
****

. Modify link:{repoURL}/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java[`NewResultAvailableEvent`] such that link:{repoURL}/src/main/java/seedu/address/ui/ResultDisplay.java[`ResultDisplay`] can show a different style on error (currently it shows the same regardless of errors).
+
**Before**
+
image::getting-started-ui-result-before.png[width="200"]
+
**After**
+
image::getting-started-ui-result-after.png[width="200"]
+
****
* Hints
** link:{repoURL}/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java[`NewResultAvailableEvent`] is raised by link:{repoURL}/src/main/java/seedu/address/ui/CommandBox.java[`CommandBox`] which also knows whether the result is a success or failure, and is caught by link:{repoURL}/src/main/java/seedu/address/ui/ResultDisplay.java[`ResultDisplay`] which is where we want to change the style to.
** Refer to link:{repoURL}/src/main/java/seedu/address/ui/CommandBox.java[`CommandBox`] for an example on how to display an error.
* Solution
** Modify link:{repoURL}/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java[`NewResultAvailableEvent`] 's constructor so that users of the event can indicate whether an error has occurred.
** Modify link:{repoURL}/src/main/java/seedu/address/ui/ResultDisplay.java[`ResultDisplay#handleNewResultAvailableEvent(NewResultAvailableEvent)`] to react to this event appropriately.
** You can write two different kinds of tests to ensure that the functionality works:
*** The unit tests for `ResultDisplay` can be modified to include verification of the color.
*** The system tests link:{repoURL}/src/test/java/systemtests/AddressBookSystemTest.java[`AddressBookSystemTest#assertCommandBoxShowsDefaultStyle() and AddressBookSystemTest#assertCommandBoxShowsErrorStyle()`] to include verification for `ResultDisplay` as well.
** See this https://github.com/se-edu/addressbook-level4/pull/799[PR] for the full solution.
*** Do read the commits one at a time if you feel overwhelmed.
****

. Modify the link:{repoURL}/src/main/java/seedu/address/ui/StatusBarFooter.java[`StatusBarFooter`] to show the total number of people in the address book.
+
**Before**
+
image::getting-started-ui-status-before.png[width="500"]
+
**After**
+
image::getting-started-ui-status-after.png[width="500"]
+
****
* Hints
** link:{repoURL}/src/main/resources/view/StatusBarFooter.fxml[`StatusBarFooter.fxml`] will need a new `StatusBar`. Be sure to set the `GridPane.columnIndex` properly for each `StatusBar` to avoid misalignment!
** link:{repoURL}/src/main/java/seedu/address/ui/StatusBarFooter.java[`StatusBarFooter`] needs to initialize the status bar on application start, and to update it accordingly whenever the address book is updated.
* Solution
** Modify the constructor of link:{repoURL}/src/main/java/seedu/address/ui/StatusBarFooter.java[`StatusBarFooter`] to take in the number of persons when the application just started.
** Use link:{repoURL}/src/main/java/seedu/address/ui/StatusBarFooter.java[`StatusBarFooter#handleAddressBookChangedEvent(AddressBookChangedEvent)`] to update the number of persons whenever there are new changes to the addressbook.
** For tests, modify link:{repoURL}/src/test/java/guitests/guihandles/StatusBarFooterHandle.java[`StatusBarFooterHandle`] by adding a state-saving functionality for the total number of people status, just like what we did for save location and sync status.
** For system tests, modify link:{repoURL}/src/test/java/systemtests/AddressBookSystemTest.java[`AddressBookSystemTest`] to also verify the new total number of persons status bar.
** See this https://github.com/se-edu/addressbook-level4/pull/803[PR] for the full solution.
****

[discrete]
==== `Storage` component

*Scenario:* You are in charge of `storage`. For your next project milestone, your team plans to implement a new feature of saving the address book to the cloud. However, the current implementation of the application constantly saves the address book after the execution of each command, which is not ideal if the user is working on limited internet connection. Your team decided that the application should instead save the changes to a temporary local backup file first, and only upload to the cloud after the user closes the application. Your job is to implement a backup API for the address book storage.

[TIP]
Do take a look at <<Design-Storage>> before attempting to modify the `Storage` component.

. Add a new method `backupAddressBook(ReadOnlyAddressBook)`, so that the address book can be saved in a fixed temporary location.
+
****
* Hint
** Add the API method in link:{repoURL}/src/main/java/seedu/address/storage/AddressBookStorage.java[`AddressBookStorage`] interface.
** Implement the logic in link:{repoURL}/src/main/java/seedu/address/storage/StorageManager.java[`StorageManager`] and link:{repoURL}/src/main/java/seedu/address/storage/XmlAddressBookStorage.java[`XmlAddressBookStorage`] class.
* Solution
** See this https://github.com/se-edu/addressbook-level4/pull/594[PR] for the full solution.
****

[[GetStartedProgramming-RemarkCommand]]
=== Creating a new command: `remark`

By creating this command, you will get a chance to learn how to implement a feature end-to-end, touching all major components of the app.

*Scenario:* You are a software maintainer for `addressbook`, as the former developer team has moved on to new projects. The current users of your application have a list of new feature requests that they hope the software will eventually have. The most popular request is to allow adding additional comments/notes about a particular contact, by providing a flexible `remark` field for each contact, rather than relying on tags alone. After designing the specification for the `remark` command, you are convinced that this feature is worth implementing. Your job is to implement the `remark` command.

==== Description
Edits the remark for a person specified in the `INDEX`. +
Format: `remark INDEX r/[REMARK]`

Examples:

* `remark 1 r/Likes to drink coffee.` +
Edits the remark for the first person to `Likes to drink coffee.`
* `remark 1 r/` +
Removes the remark for the first person.

==== Step-by-step Instructions

===== [Step 1] Logic: Teach the app to accept 'remark' which does nothing
Let's start by teaching the application how to parse a `remark` command. We will add the logic of `remark` later.

**Main:**

. Add a `RemarkCommand` that extends link:{repoURL}/src/main/java/seedu/address/logic/commands/Command.java[`Command`]. Upon execution, it should just throw an `Exception`.
. Modify link:{repoURL}/src/main/java/seedu/address/logic/parser/AddressBookParser.java[`AddressBookParser`] to accept a `RemarkCommand`.

**Tests:**

. Add `RemarkCommandTest` that tests that `execute()` throws an Exception.
. Add new test method to link:{repoURL}/src/test/java/seedu/address/logic/parser/AddressBookParserTest.java[`AddressBookParserTest`], which tests that typing "remark" returns an instance of `RemarkCommand`.

===== [Step 2] Logic: Teach the app to accept 'remark' arguments
Let's teach the application to parse arguments that our `remark` command will accept. E.g. `1 r/Likes to drink coffee.`

**Main:**

. Modify `RemarkCommand` to take in an `Index` and `String` and print those two parameters as the error message.
. Add `RemarkCommandParser` that knows how to parse two arguments, one index and one with prefix 'r/'.
. Modify link:{repoURL}/src/main/java/seedu/address/logic/parser/AddressBookParser.java[`AddressBookParser`] to use the newly implemented `RemarkCommandParser`.

**Tests:**

. Modify `RemarkCommandTest` to test the `RemarkCommand#equals()` method.
. Add `RemarkCommandParserTest` that tests different boundary values
for `RemarkCommandParser`.
. Modify link:{repoURL}/src/test/java/seedu/address/logic/parser/AddressBookParserTest.java[`AddressBookParserTest`] to test that the correct command is generated according to the user input.

===== [Step 3] Ui: Add a placeholder for remark in `PersonCard`
Let's add a placeholder on all our link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] s to display a remark for each person later.

**Main:**

. Add a `Label` with any random text inside link:{repoURL}/src/main/resources/view/PersonListCard.fxml[`PersonListCard.fxml`].
. Add FXML annotation in link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] to tie the variable to the actual label.

**Tests:**

. Modify link:{repoURL}/src/test/java/guitests/guihandles/PersonCardHandle.java[`PersonCardHandle`] so that future tests can read the contents of the remark label.

===== [Step 4] Model: Add `Remark` class
We have to properly encapsulate the remark in our link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`] class. Instead of just using a `String`, let's follow the conventional class structure that the codebase already uses by adding a `Remark` class.

**Main:**

. Add `Remark` to model component (you can copy from link:{repoURL}/src/main/java/seedu/address/model/person/Address.java[`Address`], remove the regex and change the names accordingly).
. Modify `RemarkCommand` to now take in a `Remark` instead of a `String`.

**Tests:**

. Add test for `Remark`, to test the `Remark#equals()` method.

===== [Step 5] Model: Modify `Person` to support a `Remark` field
Now we have the `Remark` class, we need to actually use it inside link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].

**Main:**

. Add `getRemark()` in link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].
. You may assume that the user will not be able to use the `add` and `edit` commands to modify the remarks field (i.e. the person will be created without a remark).
. Modify link:{repoURL}/src/main/java/seedu/address/model/util/SampleDataUtil.java/[`SampleDataUtil`] to add remarks for the sample data (delete your `addressBook.xml` so that the application will load the sample data when you launch it.)

===== [Step 6] Storage: Add `Remark` field to `XmlAdaptedPerson` class
We now have `Remark` s for `Person` s, but they will be gone when we exit the application. Let's modify link:{repoURL}/src/main/java/seedu/address/storage/XmlAdaptedPerson.java[`XmlAdaptedPerson`] to include a `Remark` field so that it will be saved.

**Main:**

. Add a new Xml field for `Remark`.

**Tests:**

. Fix `invalidAndValidPersonAddressBook.xml`, `typicalPersonsAddressBook.xml`, `validAddressBook.xml` etc., such that the XML tests will not fail due to a missing `<remark>` element.

===== [Step 6b] Test: Add withRemark() for `PersonBuilder`
Since `Person` can now have a `Remark`, we should add a helper method to link:{repoURL}/src/test/java/seedu/address/testutil/PersonBuilder.java[`PersonBuilder`], so that users are able to create remarks when building a link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].

**Tests:**

. Add a new method `withRemark()` for link:{repoURL}/src/test/java/seedu/address/testutil/PersonBuilder.java[`PersonBuilder`]. This method will create a new `Remark` for the person that it is currently building.
. Try and use the method on any sample `Person` in link:{repoURL}/src/test/java/seedu/address/testutil/TypicalPersons.java[`TypicalPersons`].

===== [Step 7] Ui: Connect `Remark` field to `PersonCard`
Our remark label in link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] is still a placeholder. Let's bring it to life by binding it with the actual `remark` field.

**Main:**

. Modify link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`]'s constructor to bind the `Remark` field to the `Person` 's remark.

**Tests:**

. Modify link:{repoURL}/src/test/java/seedu/address/ui/testutil/GuiTestAssert.java[`GuiTestAssert#assertCardDisplaysPerson(...)`] so that it will compare the now-functioning remark label.

===== [Step 8] Logic: Implement `RemarkCommand#execute()` logic
We now have everything set up... but we still can't modify the remarks. Let's finish it up by adding in actual logic for our `remark` command.

**Main:**

. Replace the logic in `RemarkCommand#execute()` (that currently just throws an `Exception`), with the actual logic to modify the remarks of a person.

**Tests:**

. Update `RemarkCommandTest` to test that the `execute()` logic works.

==== Full Solution

See this https://github.com/se-edu/addressbook-level4/pull/599[PR] for the step-by-step solution.
////


[appendix]
== Product Scope

*Target user profile*:

* Busy NUS students.
* Need to organise group project meetings.
*  Need to organise interest group meet-ups and encourage new participants to attend.
*  Need to find the best time and location based on the schedules of participants and addresses.
*  Some level of tech-savviness to appreciate CLI apps.
*  Have a schedule that works on a weekly basis.

*Value proposition*:

* Key concept: Semi-automate the coordination of meeting time/venue based on participant’s schedule.

* What customers want: Students want to organize all kinds of meetups in a fast and efficient way, eg project meetups, interests groups etc.

* Limitations of what customers can do now: Hard to coordinate the meetups as they are unable to locate people of available time slots or contact people with similar interests. They have to resort to use platforms such as WhatsApp to advertise their events through friends, and coordinate similar time slots through very manual means such as Google Docs and Doodle.

* Benefits customers seek to achieve: Students want to do all the scheduling, inviting and finalizing of a meetup in a fast and effective way.

* How value proposition is delivered: The event organiser app provides a large database of all the contacts and information of NUS students, which allows the organizers to search by name, availability, interests etc.

[Discrete]
=== Feature

Division of work

==== Keng Ji : Add event feature with polls and time, location features

- [x] V1.1: Event organiser able to create a basic event with date, time, organiser, participant and poll features.
- [x] V1.2: Users able to search for events by attributes (date, time, location, interest) and time range.
- [x] V1.3: Application able to generate poll options based on participants' schedules.

==== Yao Feng : Add login function and improve on search functions
- [x] V1.1: Basic login command.
- [x] V1.2: Search for users based on phone number, interests, friendships, schedule, and address.
- [x] V1.3: Improved login command with password.

==== Zhang Cheng : Add additional attributes for networking among users
- [x] V1.1: Users able to specify their interests.
- [x] V1.2: Users able to specify friendships with other people.
- [x] V1.3: Users able to search for friends and become more connected.

==== Adeel : Add location-related features
- [ ] V1.1: Add feature of nearest MRT for each individual.
- [ ] V1.2: Implement recommendation of best meet-up location via MRT lines.
- [ ] V1.3: Implement Google maps visualisation.

==== Jason : Event Management/Recommendation
- [x] V1.1: Pull schedule from NUS Mods and convert to a timetable. Allow Unions of timetable.
- [x] V1.2: Create, Update, Delete individual slots in timetable. Find best possible time for events using timetables.
- [x] V1.3: Visualize timetables of multiple friends.

[appendix]
== User Stories

Priorities: High (must have) - `* * \*`, Medium (nice to have) - `* \*`, Low (unlikely to have) - `*`

[width="59%",cols="22%,<23%,<25%,<30%",options="header",]
|=======================================================================
|Priority |As a ... |I want to ... |So that I can...
|`* * *`|Event Organiser|Find people that might be interested in the event that I am organising.| Find potentially interested individuals to join my event.

|`* * *`|Event Organiser|Allow my participants to vote for their most preferred time and location.| Organise an event at a time and location based on popular vote.

|`* * *`|Event Organiser|Automate the task of sieving through the schedules of all my participants for the ideal meet-up location and meet-up time.| Do not have to worry about the hassle of finding the best time and location for my event.

|`* * *`|Event Organiser|Have a specialised platform to post events aimed at a tech-savvy audience.| Promote my event to an audience that I am interested in.

|`* * *`|Busy User|Have a platform to search for all the events that are near the place I stay.| Go to an event without the trouble of travelling long distances.

|`* * *`|Busy User|Have a platform to search for all the events that occur during my free time.| Easily find a event that I have time to go for.

|`* * *`|Tech-savvy User| Have a platform that supports CLI.| Easily write scripts to automatic the task that I want to accomplish on a regular basis.

|`* * *`|User|Keep track of all the events that I can gone to.| Have a record of the events that I have been to.

|`* * *`|User|Visualise the event location on Google maps.| Find out exactly how to get to that location.

|`* * *`|User|A social media kind of platform which specialises on organising events.| Know the events that my friends are going to and let my friends know about the events that I am going to.

|`* * *`|User|Easily find other users based on their particulars.| Find my friends and family members, or anyone that might be of interest to me.

|`* * *`|User|Create an individual profile with some security features.| I can access and make changes to my own profile easily, but other people will not have access to it.

|`* * *`|NUS student|Have a platform that utilises NUSMODS's schedule.| Conveniently update my schedule using NUSMODS's schedule.

|`* * *`|NUS student|Have a platform that can facilitate the task of finding the ideal time and location for project group meet-ups.| Easily organise project group meet-ups instead of asking each individual group mates one by one.

|`* *`|Event Organiser|Find people who live close to a specific location and people who are available at a specific time.| Find people who are at least able to attend the event.

|`* *`|User|Find mutual friends in among my social circle and people with similar interests as me.|I can widen my social circle and meet like minded people.

|`*`|User|Visualise my social network and the groups I am a part of.| See how I am connected with another person.


|=======================================================================

[appendix]

// tag::UC[]
== Use Cases
//(For all use cases below, the *System* is the `AddressBook` and the *Actor* is the `user`, unless specified otherwise)
(For all use cases below, the *System* is the `EventOrganiser`, unless specified otherwise)

[discrete]
=== Use case: U01 - Create new user

*Actor: New user*

*MSS:*

1.	User creates new user profile by specifying his/her contact detail, address, schedule, and interests.
2.	System checks that the details are valid.
3.	System informs the user that the profile has been successfully created.

+
Use case ends.

*Extensions:*

* 2a. User enters invalid detail.
+
** 2a1. System will prompt user to re-enter their details.
+
** 2a2. User enters profile details again.
+
Steps 2a1 - 2a2 are repeated until the details entered are valid.
+
Use case resumes from step 3.

[discrete]
=== Use case: U02 - Log in to a user account

*Actor: User*

*MSS:*

1.	User creates logs in using his/her name, contact detail, address, and email
2.	System checks that the details are valid.
3.	System informs the user that he/she has successfully logged in.

+
Use case ends.

*Extensions:*

* 2a. User enters invalid details.
+
** 2a1. System will prompt user to re-enter their details.
+
** 2a2. User enters profile details again.
+
Steps 2a1 - 2a2 are repeated until the details entered are valid.
+
Use case resumes from step 3.

[discrete]
=== Use case: U03 – Delete a user

*Actor: User*

*MSS:*

1.	User chooses to delete his/her user profile.
2.	System checks that the profile that will be deleted corresponds to the profile of the current user.
3.	System informs the user that the profile has been successfully deleted.
4.	System deletes the user profile within its storage.

+
Use case ends.

*Extensions:*

* 2a. The profile to be deleted does not correspond to the profile of the current user.
+
** 2a1. System informs user that the profile cannot be deleted.
+
** 2a2. User either change his profile or change the profile that he/she wants to delete.
+
Steps 2a1 – 2a2 are repeated until the current user and the user profile that will be deleted matches.
+
Use case resumes from step 3.

[discrete]
=== Use case: U04 – Create new event

*Actor: Event Organiser*

*Precondition: Event organiser has logged himself/herself in*

*MSS:*

1.	Event organiser creates a new event by specifying the name, location and tags of the event.
2.	System checks that the details are valid.
3.	System informs the event organiser that the event has been successfully created.

+
Use case ends.

*Extensions:*

* 2a. Event organiser enters invalid details.
+
** 2a1. System will prompt event organiser to re-enter the event details.
+
** 2a2. Event organiser enters event details again.
+
Steps 2a1 - 2a2 are repeated until the details entered are valid.
+
Use case resumes from step 3.

[discrete]
=== Use case: U05 – Delete an event

*Actor: Event organiser*

*Precondition: Event organiser has identified himself/herself*

*MSS:*

1.	Event organiser chooses to delete an event.
2.	System checks that the event belongs to the user.
3.	System informs the event organiser that the event has been successfully deleted.

+
Use case ends.

*Extensions:*

* 2a. The event that will be deleted does not belong to the user.
+
** 2a1. System will inform the user that the event cannot be deleted.
+
** 2a2. User either change his profile or change the event that he/she wants to delete.
+
** Steps 2a1 – 2a2 are repeated until the event belongs to the current user.
+
Use case resumes from step 3.

[discrete]
=== Use case: U06 - User joins an event

*Actor: User*

*Precondition: User has logged in*

*MSS:*

1.	User searches for available events.
2.	System shows user all the events that are available.
3.	User chooses an event that he wants to join.
4.	System informs the user that he/she has been successfully joined the event.

+
Use case ends.

*Extensions:*

* 1a. User may specify extra details to filter out search results.
+
Use case resumes at step 2.

[discrete]

////
=== Use case: U07 – User invites other to join him/her event

*Actor: Event organiser, another user that will be invited to join the event organiser’s event*

*Precondition: All the relevant users have identified themselves*

*MSS:*

1.	Event organiser searches for other users.
2.	System shows user all the other users.
3.	User chooses a user that he/she wants to invite.
4.	System informs the event organiser that an invitation has been sent to the user.
5.	System informs the user of an invitation to join an event.
6.	User being invited choose to accept the event invitation.
7.	System informs the user that he/she has successfully joined the event.
8.	System informs the event organiser that a new user has joined his/her event.

+
Use case ends.


*Extensions:*

* 1a. Event organiser may specify extra details to filter search results.
+
Use case resumes at step 2.

* 6a. User being invited may choose to deny the event invitation.
+
** 6a1. System informs the user that he/she has rejected the event invitation.
+
Use case ends.
////
[discrete]

=== Use case: U07 – Event organiser creates a poll

*Actor: Event organiser*

*Precondition: Event organiser has logged in and created an event*

*MSS:*

1.	Event organiser selects an event.
2.	Event organiser creates a new poll.
3.	Event organiser creates options for the poll.
4.	System informs the event organiser’s options has been successfully updated.
5.	System updates polling information in its storage.

+
Use case ends.

[discrete]

=== Use case: U08 – User votes in a poll

*Actor: User who is keen to join an event*

*Precondition: User has logged in and has joined an event*

*MSS:*

1.	User selects a poll from the poll list of the event.
2.	System displays the poll selected by the user.
3.	User looks at the options given in the poll and votes for his/her preferred options.
4.	System adds the user to the voter list of that option.
5.  System updates the list of most popular options in the poll.
6.	System updates polling information in its storage.

+
Use case ends.

[discrete]

=== Use case: U08 – Event organiser confirms the event details

*Actor: Event organiser*

*Precondition: Event organiser has logged in, event participants have all joined and voted in polls*

*MSS:*

1.	Event organiser looks at the poll results.
2.	System shows the top options for each of the polls.
3.	Event organiser decides on the ideal time, date and location for the event and sets them accordingly.
4.	System informs the user’s options has been successfully updated.
5.	System updates event information in its storage.

+
Use case ends.

[discrete]

////
=== Use case: U09 – Event organiser gets the recommended date, time and location for his event from the system’s algorithm and the polling session. Thereafter, chooses the date, time and location for his event

*Actor: Event organiser*

*Precondition: Event organiser has identified himself and has created an event*

*MSS:*

1.	Event organiser asks the systems to recommend the date and time for the event based on the schedules of the current users that have indicated that they are going.
2.	System shows a few recommendations for the date and time.
3.	Event organiser checks the polling result for the date and time.
4.	System shows the top choices for the date and time from the polling session.
5.	Event organiser chooses the date time for his date and time for the event.
6.	System informs user that the date and time has been successfully updated.
7.	System updates the date and time for the event.
8.	Event organiser Event organiser asks the systems to recommend the date and time for the event on the address of the current users that have indicated that they are going.
9.	System shows a few recommendations for the location.
10.	Event organiser checks the polling result for the date and time.
11.	System shows the top choices for location from the polling session.
12.	Event organiser chooses the location for the event.
13.	System informs the location has been successfully updated.

+
Use case ends.

*Extension:*

* 1a. Event organiser asks for recommendations when the event does not have any users that has indicated that they are going.
+
** 1a1. The system will recommend time and date based on the schedule of the event organiser.
+
Use case resumes from step 3.

* 3a. Event organiser checks the polling result when more than 1 option has the highest votes.
+
** 3a1. System will show all the options that have the highest votes only.
+
Use case resumes from step 5.

* 8a. Event organiser ask for recommendations when the event does not have any users that has indicated that they are going.
+
** 8a1. The system will recommend the location based on the address of the event organiser.
+
Use case resumes from step 10.

* 10a. Event organiser checks the polling result when more than 1 option has the
highest votes.
+
** 10a1. System will show all the options that have the highest votes only.
+
Use case resumes from step 12.
////
// end::UC[]

[appendix]
== Non Functional Requirements
.  Should work on any <<mainstream-os,mainstream OS>> as long as it has Java `9` or higher installed.
.  Should be able to hold up to 1000 persons without a noticeable sluggishness in performance for typical usage.
.  A user with above average typing speed for regular English text (i.e. not code, not system admin commands) should be able to accomplish most of the tasks faster using commands than using the mouse.
.  Commands should be intuitive for users to pick up easily.
.  Allows a limited form of security by ensuring that users are only able to log in to their own accounts.

[appendix]
== Glossary
[[user]] User / Person::
Refers to a person who uses EventOrganiser.

[[user-profile]] User Profile::
Refers to an account that is recorded in EventOrganiser.

[[new-user]] New User::
Refers to a person who does not own a user profile in EventOrganiser.

[[current-user]] Current User::
Refers to the user currently identified by the system.

[[event-organiser]] Event Organiser::
Refers to a user who has created an event.


////

[[mainstream-os]] Mainstream OS::
Windows, Linux, Unix, OS-X

[[private-contact-detail]] Private contact detail::
A contact detail that is not meant to be shared with others
////

[appendix]
== Product Survey
////
*Product Name*

Author: ...

Pros:

* ...
* ...

Cons:

* ...
* ...
////
* NIL

[appendix]
== Instructions for Manual Testing

Given below are instructions to test the app manually.

[NOTE]
These instructions only provide a starting point for testers to work on; testers are expected to do more _exploratory_ testing.

=== Launch and Shutdown

. Initial launch

.. Download the jar file and copy into an empty folder
.. Double-click the jar file +
   Expected: Shows the GUI with a set of sample contacts. The window size may not be optimum.

. Saving window preferences

.. Resize the window to an optimum size. Move the window to a different location. Close the window.
.. Re-launch the app by double-clicking the jar file. +
   Expected: The most recent window size and location is retained.

=== Login a user
.. Note: The states of each test case is continued in the next test case.
.. Prerequisites: Event Organiser already has a user with name as "Alex Yeoh" and password as "password". Futhermore, no user is currently logged in. The Event Organiser does not have a user with name as "Michael Lim" and password as "password".
.. Test case: `login`
   Expected: Login unsuccessful.
.. Test case: `login n/Michael Lim pass/password`
   Expected: Login unsuccessful.

.. Test case `login n/Alex Yeoh pass/password`
   Expected: Login successful.

.. Test case: `login n/Michael Lim pass/password`
   Expected: Login unsuccessful.

=== Logout a user
.. Note: The states of each test case is continued in the next test case.
.. Prerequisites: There is no user currently logged in and the user with name as "Alex Yeoh" and password as "password" is currently logged in.
.. Test case `logout`
   Expected: Logout successful.
.. Test case: `logout`
   Expected: Logout unsuccessful.

=== Find users
.. Prerequisites: Event Organiser currently has two user accounts. The first user has name as "Alex Yeoh" and interests as "study". The second user has name as "Bernice Yu" and interest as "play".
.. Test case `findUser n/Alex Yeoh`
   Expected: Only user "Alex Yeoh" is listed.
.. Test case: `findUser i/interest`
   Expected: Only user "Bernice Yu" is listed.
.. Test case: `findUser n/Alex Yeoh i/interest`
   Expected: Only users "Bernice Yu" and "Alex Yeoh" are listed.

=== Edit a user
.. Prerequisites: Event Organiser has a user with name as "Alex Yeoh" and user "Alex Yeoh" is currently logged in.
.. Test case `editUser n/Alex Tan`
   Expected: Name of user successfully changed to "Alex Tan".

=== Delete a user
.. Prerequisites: Event Organiser has a user with name as "Alex Yeoh" and user "Alex Yeoh" is currently logged in.
.. Test case `deleteUser`
   Expected: user "Alex Yeoh" successfully deleted.

=== Populate a user schedule via Timetable
.. Prerequisites: Event Organiser has a user with name as "Alex Yeoh" and user "Alex Yeoh" is currently logged in.
.. Test case `editUser tt/http://modsn.us/H4v8s`
   Expected: Schedule of user successfully overwritten to 100000000000000011110000000011110000000000
000000000000000000000000000000111111110000000000000000000000000000000000001100000011110000000000
000000000000000000000000000000111100001111000000000000000000000000000000111100001111111111000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000.
.. Test case `editUser tt/http://modsn.us/H`
    Expected: Invalid NUSmods Link

=== Edit a user schedule
.. Prerequisites: Event Organiser has a user with name as "Alex Yeoh", no existing schedule and user "Alex Yeoh" is currently logged in.
.. Test case `editUser su/monday 0000`
   Expected: Schedule of user "Alex Yeoh" successfully changed. First bit of the schedule is now 1.
.. Test case `editUser su/monday 0030`
   Expected: Schedule of user "Alex Yeoh" successfully changed. Second bit of the schedule is now 1.

=== Find free time between two users
.. Prerequisites: Event Organiser has 2 users A and B on index 1 and 2. Both A and B has no existing schedule.
.. Test case `maxSchedule sl/0000-0000`
   Expected: Free time of 0000 from Monday to Sunday is displayed.
.. Test case `maxSchedule sl/0800-0900`
   Expected: Free time of 0800, 0830, 0900 and 0930 from Monday to Sunday are displayed.

=== Add a friend
.. Prerequisites: Event Organiser has users with name "Alex Yeoh" and "Bernice Yu", and they are not currently friends, and user "Alex Yeoh" is currently logged in.
.. Test case `addFriend 1,2`
   Expected: users "Alex Yeoh" and "Bernice Yu" become friends with each other.

=== Delete a friend
.. Prerequisites: Event Organiser has users with name "Alex Yeoh" and "Bernice Yu", and they are currently friends, and user "Alex Yeoh" is currently logged in.
.. Test case `deleteFriend 1,2`
   Expected: users "Alex Yeoh" and "Bernice Yu" are no longer friends with each other.

=== Add an event
.. Prerequisites: Event Organiser has a user with name as "Alex Yeoh" and user "Alex Yeoh" is currently logged in.
.. Test case `addEvent n/CS1234 Group Meeting a/SoC Canteen t/URGENT`
   Expected: new event with details `CS1234 Group Meeting Location: SoC Canteen Tags: [URGENT]` is added and selected.
   "Alex Yeoh" is the event organiser.
   Event details are displayed in the event details panel, and "Alex Yeoh" is a participant of the event under "People attending".

=== Add a poll
.. Prerequisites: Event organiser "Alex Yeoh" is logged in and has selected the first event in the list, created by him.
.. Test case `addPoll n/Meeting date`
   Expected: a new poll with name "Meeting date" is created and displayed in the event details panel.

=== Add a time poll
.. Prerequisites: Event organiser "Alex Yeoh" is logged in and has selected the first event in the list, created by him.
.. Test case `addTimePoll d/19-12-2018 d2/20-12-2018`
   Expected: a new poll with name "Time Poll" is created and displayed in
   the event details panel. It is populated by 30 minute slots based on the schedules of the participants.

=== Add poll options
.. Prerequisites: Event organiser "Alex Yeoh" is logged in and has selected an event created by him.
.. Test case `addOption i/1 o/12 December`
   Expected: a new poll option with name "12 December" is created and displayed in the event details panel.
.. Test case `addOption i/1 o/13 December`
   Expected: a new poll option with name "13 December" is created and displayed in the event details panel.

=== Delete an event
.. Prerequisites: Event organiser "David Li" is logged in and "David Li" is the organiser of event at index 2 but not event at index 1.
.. Test case `deleteEvent 2`
   Expected: Event at index 2 is deleted
.. Test case `deleteEvent 1`
   Expected: Event 1 is not deleted, an error message "You are not the organiser of this event." is returned.

=== Select an event
.. Prerequisites: The event list is not empty.
.. Test case `selectEvent 1`
   Expected: The event details panel displays the details of the event at index 1.

=== Display poll
.. Prerequisites: The event at index 1 has been selected and there is a poll in the event.
.. Test case `displayPoll 1`
   Expected: Poll at index 1 of the poll list of the first event is displayed.

=== Edit an event
.. Prerequisites: Event organiser "Alex Yeoh" is logged in and has selected an event created by him.
.. Test case `editEvent n/CS2100 Discussion a/NUS UTown`
   Expected: The selected event is edited to have the name "CS2100 Discussion" and the location "NUS UTown".
.. Test case `editEvent t/URGENT`
   Expected: The selected event is edited to have only one tag "URGENT"

=== Find an event by attributes
.. Prerequisites: The event list is not empty.
.. Test case `findEvent e/Linguistics Reading Group`
   Expected: all and only events with name "Linguistics Reading Group" are displayed in the event list.
.. Test case findEvent t1/17:30 on/Charlotte Oliveiro`
   Expected: all and only events starting at 17:30 and organised by "Charlotte Oliveiro" are displayed in the event list.

=== Find event by time
.. Prerequisites: The event list is not empty.
.. Test case `findEventByTime d/01-12-2018 t1/07:30 t2/17:30`
   Expected: all and only events held between 07:30 and 17:30 on 01-12-2018 are displayed.

=== List all events
.. Prerequisites: NIL
.. Test case `listEvent`
   Expected: All events in the event organiser are displayed in the events list.

=== Set date
.. Prerequisites: Event organiser "Alex Yeoh" is logged in and has selected an event created by him.
.. Test case `setDate d/12-12-2018`
   Expected: the date "12-12-2018" is set and appears in the event card of the event.

=== Set time
.. Prerequisites: Event organiser "Alex Yeoh" is logged in and has selected an event created by him.
.. Test case `setTime t1/12:30 t2/14:30`
   Expected: the times "12:30 - 14:30" are set and appear in the event card of the event.

=== Join event
.. Prerequisites: A user "Charlotte Oliveiro" is logged in and has yet to join the first event in the list.
.. Test case `joinEvent 1`
   Expected: The user "Charlotte Oliveiro" is added to the participants list of the first event.
   The new event details are displayed in the event details panel.

=== Vote in poll
.. Prerequisites: User "Charlotte Oliveiro" is logged in and joined the first event in the list,
to which the event organiser has added a poll "Meeting Date" at poll index 1. In the poll, there are the options `12 December` and `13 December` with no voters.
.. Test case `vote i/1 o/12 December`
   Expected: The user "Charlotte Oliveiro" is added to the voter list of the option "12 December"
   The most popular options list updates to include "12 December"



////
=== Deleting a person

. Deleting a person while all persons are listed

.. Prerequisites: List all persons using the `list` command. Multiple persons in the list.
.. Test case: `delete 1` +
   Expected: First contact is deleted from the list. Details of the deleted contact shown in the status message. Timestamp in the status bar is updated.
.. Test case: `delete 0` +
   Expected: No person is deleted. Error details shown in the status message. Status bar remains the same.
.. Other incorrect delete commands to try: `delete`, `delete x` (where x is larger than the list size) _{give more}_ +
   Expected: Similar to previous.

_{ more test cases ... }_
////
=== Saving data

. Dealing with missing/corrupted data files

.. Corrupted XML file: the application would not run to prevent unexpected responses.

.. Missing XML file: the application will re-generate the sample xml, and save it as data/addressbook.xml when a change in the sample data.

